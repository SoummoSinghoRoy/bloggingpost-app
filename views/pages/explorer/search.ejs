<%- include('../../partials/header.ejs') %>

<div class="container">
  <div class="row">
    <div class="col-md-6 offset-sm-3">
      <h5>Search result for - <%= searchTerm %> </h5>
      <% if (posts.length === 0) { %>
       <p class="text-center text-muted my-2">Post not found...</p>
      <% }else{ %>
        <% for(let post of posts){ %>
          <div class="card card-body mb-2">
            <a href="/explorer/<%= post._id %>" class="text-secondary">
              <h5><%= post.title %></h5>
              <p><%= truncate(post.body) %> </p>
            </a>
          </div>
        <% } %>  
      <% } %> 
    </div>
  </div>
  <div class="row">
    <div class="col-md-6 offset-sm-3">
      <% if (totalPage > 1) { %>
        <nav aria-label="Page navigation example">
          <ul class="pagination justify-content-center">
            <li class="page-item <%= currentPage === 1 ? 'disabled' : '' %>">
              <a class="page-link" href="<%=`/search?serachTerm=${searchTerm}&page=${currentPage - 1}`%> ">previous</a>
            </li>
            <% for( let i = 1; i <= totalPage; i++ ) { %>
              <li class="page-item <%= currentPage === i ? 'active' : '' %>">
                <a class="page-link" href="<%=`/search?serachTerm=${searchTerm}&page=${i}`%>"><%= i %></a>
              </li>
            <% } %>
            <li class="page-item <%= currentPage === totalPage ? 'disabled' : '' %>">
              <a class="page-link" href="<%=`/search?serachTerm=${searchTerm}&page=${currentPage + 1}`%> ">next</a>
            </li>
          </ul>
        </nav>
      <% } %>
    </div>
  </div>
</div>

<%- include('../../partials/footer.ejs') %>
</body>
</html>